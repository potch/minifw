export default({routes:e=[],handlerFactory:r=(e=>e)}={})=>({handle(t,a){const n=t instanceof RegExp?t:new RegExp("^"+t.replace(/\./g,"\\.").replace(/\[([^\]]+)\]/g,((_,e)=>`(?<${e}>[^\\/]+)`)).replace(/\*/g,".*?")+"$");e.push({path:t,pattern:n,handler:r(a)})},route:r=>e.reduce(((e,t)=>{const a=t.pattern.exec(r);return a?[...e,{...t,params:a.groups}]:e}),[]),get routes(){return e}});
