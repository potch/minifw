export default({routes:e=[],handlerFactory:r=(e=>e)}={})=>({handle(a,t){const p=a instanceof RegExp?a:new RegExp("^"+a.replace(/\./g,"\\.").replace(/\[([^\]]+)\]/g,((_,e)=>`(?<${e}>[^\\/]+)`)).replace(/\*/g,".*?")+"$");e.push({path:a,pattern:p,handler:r(t)})},route:r=>e.reduce(((e,a)=>{const t=a.pattern.exec(r);return t?[...e,{...a,params:t.groups}]:e}),[])});
